#!/bin/sh
# Update the HTTP SkipAuth access name

eval $(confclient -g 'network_http_s0_accessname&network_http_s1_accessname&network_http_s2_accessname&network_http_s3_accessname&network_http_s4_accessname' -t NameValue -p 9 -b)
NEW1=$network_http_s0_accessname
NEW2=$network_http_s1_accessname
NEW3=$network_http_s2_accessname
NEW4=$network_http_s3_accessname
NEW5=$network_http_s4_accessname

# Update rtsps SkipAuth access name
sed -i "s/^\([#]\?SkipAuth@svrpsh1[ \t]\+\)\(.\)*/\1\/$NEW1/" /etc/conf.d/boa/boa.conf
sed -i "s/^\([#]\?SkipAuth@svrpsh2[ \t]\+\)\(.\)*/\1\/$NEW2/" /etc/conf.d/boa/boa.conf
sed -i "s/^\([#]\?SkipAuth@svrpsh3[ \t]\+\)\(.\)*/\1\/$NEW3/" /etc/conf.d/boa/boa.conf
sed -i "s/^\([#]\?SkipAuth@svrpsh4[ \t]\+\)\(.\)*/\1\/$NEW4/" /etc/conf.d/boa/boa.conf
sed -i "s/^\([#]\?SkipAuth@svrpsh5[ \t]\+\)\(.\)*/\1\/$NEW5/" /etc/conf.d/boa/boa.conf

/etc/init.d/httpd reload
